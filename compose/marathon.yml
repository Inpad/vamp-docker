mesos-master:
  image: magneticio/vamp-mesos-0.25.0:${VAMP_VERSION}
  container_name: vamp-mesos-master
  command: "mesos-master --registry=in_memory"
  ports:
    - "5050:5050"
  links:
    - zookeeper
    - mesos-slave
  environment:
    MESOS_CLUSTER: magneticio/mesos
    MESOS_LOG_DIR: /var/log
    MESOS_QUORUM: 1
    MESOS_ZK: zk://zookeeper:2181/mesos
    MESOS_WORK_DIR: /var/lib/mesos
    MESOS_HOSTNAME: 192.168.99.100

mesos-slave:
  image: magneticio/vamp-mesos-slave-0.25.0:${VAMP_VERSION}
  container_name: vamp-mesos-slave
  privileged: true
  command: "--containerizers=docker,mesos --executor_registration_timeout=5mins --docker_stop_timeout=10secs"
  links:
    - zookeeper
  ports:
    - "5051:5051"
  environment:
    MESOS_ISOLATOR: "cgroups/cpu,cgroups/mem"
    MESOS_HOSTNAME: 192.168.99.100
    MESOS_MASTER: zk://zookeeper:2181/mesos
    MESOS_LOG_DIR: /var/log
    MESOS_PORT: "5051"
    MESOS_HOSTNAME: 192.168.99.100

marathon:
  image: magneticio/vamp-marathon-0.13.0:${VAMP_VERSION}
  container_name: vamp-marathon
  ports:
    - "8080:8080"
  links:
    - zookeeper
  command: "--master zk://zookeeper:2181/mesos --zk zk://zookeeper:2181/marathon --task_launch_timeout 300000"

